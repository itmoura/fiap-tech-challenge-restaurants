<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Modeling - MongoDB - Tech Challenge Restaurant</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="icon" type="image/x-icon" href="../assets/favicon.ico">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>üìö Documenta√ß√£o</h2>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">In√≠cio</div>
                <a href="../index.html" class="nav-item">
                    <span class="nav-item-icon">üè†</span>
                    Home
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Configura√ß√£o</div>
                <a href="prerequisites.html" class="nav-item">
                    <span class="nav-item-icon">üìã</span>
                    Pr√©-requisitos
                </a>
                <a href="local-setup.html" class="nav-item">
                    <span class="nav-item-icon">‚öôÔ∏è</span>
                    Configura√ß√£o Local
                </a>
                <a href="docker.html" class="nav-item">
                    <span class="nav-item-icon">üê≥</span>
                    Docker
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Microservi√ßos</div>
                <a href="restaurants.html" class="nav-item">
                    <span class="nav-item-icon">üçΩÔ∏è</span>
                    Restaurants API
                </a>
                <a href="user-microservice.html" class="nav-item">
                    <span class="nav-item-icon">üë§</span>
                    Users Microservice
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Ferramentas</div>
                <a href="postman.html" class="nav-item">
                    <span class="nav-item-icon">üì°</span>
                    Postman Collections
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Arquitetura</div>
                <a href="architecture-overview.html" class="nav-item">
                    <span class="nav-item-icon">üèóÔ∏è</span>
                    Vis√£o Geral
                </a>
                <a href="api-overview.html" class="nav-item">
                    <span class="nav-item-icon">üîó</span>
                    API Overview
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Recursos</div>
                <a href="menu-items.html" class="nav-item">
                    <span class="nav-item-icon">üçï</span>
                    Menu Items
                </a>
                <a href="menu-categories.html" class="nav-item">
                    <span class="nav-item-icon">üìÇ</span>
                    Menu Categories
                </a>
                <a href="kitchen-types.html" class="nav-item">
                    <span class="nav-item-icon">üë®‚Äçüç≥</span>
                    Kitchen Types
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Desenvolvimento</div>
                <a href="testing.html" class="nav-item">
                    <span class="nav-item-icon">üß™</span>
                    Testes
                </a>
                <a href="status-codes.html" class="nav-item">
                    <span class="nav-item-icon">üìä</span>
                    Status Codes
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Sobre</div>
                <a href="author.html" class="nav-item">
                    <span class="nav-item-icon">üë®‚Äçüíª</span>
                    Autor
                </a>
                <a href="license.html" class="nav-item">
                    <span class="nav-item-icon">üìÑ</span>
                    Licen√ßa
                </a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <h1>üóÑÔ∏è Data Modeling - MongoDB</h1>
                <p>Compreenda como os dados s√£o estruturados e persistidos no MongoDB</p>
            </header>

            <nav class="breadcrumb">
                <a href="../index.html">Home</a>
                <span class="breadcrumb-separator">/</span>
                <span>Data Modeling</span>
            </nav>

            <div class="content-body">
                <!-- Overview Section -->
                <div class="card">
                    <h2>üìã Vis√£o Geral do Data Modeling</h2>
                    <p>
                        O Tech Challenge Restaurant utiliza MongoDB como banco de dados NoSQL, 
                        implementando uma arquitetura de dom√≠nio com entidades bem definidas. 
                        Esta p√°gina demonstra como os dados s√£o estruturados e persistidos no MongoDB.
                    </p>
                    
                    <div class="feature-cards">
                        <div class="feature-card">
                            <div class="feature-card-icon">üèóÔ∏è</div>
                            <h3 class="feature-card-title">Arquitetura de Dom√≠nio</h3>
                            <p class="feature-card-description">
                                Entidades de dom√≠nio separadas das entidades de persist√™ncia, 
                                seguindo princ√≠pios de Clean Architecture.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üìä</div>
                            <h3 class="feature-card-title">MongoDB Collections</h3>
                            <p class="feature-card-description">
                                Dados organizados em collections espec√≠ficas com √≠ndices 
                                otimizados para performance.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üîç</div>
                            <h3 class="feature-card-title">Mapeamento Expl√≠cito</h3>
                            <p class="feature-card-description">
                                Uso de anota√ß√µes @Field para mapeamento expl√≠cito entre 
                                campos Java e documentos MongoDB.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Database Configuration -->
                <div class="card">
                    <h2>‚öôÔ∏è Configura√ß√£o do MongoDB</h2>
                    <p>
                        O projeto utiliza Spring Data MongoDB com configura√ß√µes espec√≠ficas 
                        para diferentes ambientes (desenvolvimento e produ√ß√£o).
                    </p>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>application.yml - Configura√ß√£o MongoDB</span>
                        </div>
                        <pre><code>spring:
  data:
    mongodb:
      uri: ${MONGO_URI:mongodb://localhost:27017/tech_challenge_restaurants}
      auto-index-creation: true
      write-concern: MAJORITY
      read-concern: MAJORITY

# Configura√ß√£o para desenvolvimento
logging:
  level:
    com.fiap.itmoura.tech_challenge_restaurant: DEBUG
    org.springframework.data.mongodb.core.MongoTemplate: DEBUG
    org.springframework.data.mongodb.repository.query: DEBUG
    org.springframework.data.mongodb.core.convert: DEBUG</code></pre>
                    </div>
                </div>

                <!-- Entity Structure -->
                <div class="card">
                    <h2>üèõÔ∏è Estrutura das Entidades</h2>
                    <p>
                        As entidades s√£o organizadas em duas camadas: entidades de dom√≠nio 
                        e entidades de documento MongoDB.
                    </p>
                    
                    <h3>üìÅ Collections do MongoDB</h3>
                    <ul>
                        <li><strong>restaurants</strong> - Dados dos restaurantes</li>
                        <li><strong>kitchen_types</strong> - Tipos de cozinha</li>
                    </ul>
                </div>

                <!-- Restaurant Entity -->
                <div class="card">
                    <h2>üçΩÔ∏è RestaurantEntity - Estrutura Completa</h2>
                    <p>
                        A entidade principal que representa um restaurante no sistema, 
                        com todos os seus dados relacionados.
                    </p>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>RestaurantEntity.java - Entidade de Dom√≠nio</span>
                        </div>
                        <pre><code>@Document(collection = "restaurants")
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class RestaurantEntity {

    @Id
    private String id;
 
    private String name;
    private String address;
    private KitchenTypeEntity kitchenType;
    private List&lt;OperationDaysTimeData&gt; daysOperation;
    private String ownerId;
    private Boolean isActive;
    private List&lt;MenuCategoryEntity&gt; menu;

    @LastModifiedDate
    private LocalDateTime lastUpdate;
    
    @CreatedDate
    private LocalDateTime createdAt;
}</code></pre>
                    </div>
                    
                    <h3>üìä Documento MongoDB - Restaurant</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Exemplo de Documento MongoDB</span>
                        </div>
                        <pre><code>{
  "_id": "507f1f77bcf86cd799439011",
  "name": "Restaurante Italiano",
  "address": "Rua das Flores, 123 - S√£o Paulo, SP",
  "kitchenType": {
    "id": "507f1f77bcf86cd799439012",
    "name": "Italiana",
    "description": "Culin√°ria italiana tradicional",
    "createdAt": "2024-01-15T10:30:00Z",
    "lastUpdate": "2024-01-15T10:30:00Z"
  },
  "daysOperation": [
    {
      "day": "MONDAY",
      "openingHours": "11:00",
      "closingHours": "22:00"
    },
    {
      "day": "TUESDAY",
      "openingHours": "11:00",
      "closingHours": "22:00"
    }
  ],
  "ownerId": "user123",
  "isActive": true,
  "menu": [
    {
      "id": "507f1f77bcf86cd799439013",
      "type": "Pratos Principais",
      "items": [
        {
          "id": "507f1f77bcf86cd799439014",
          "name": "Espaguete √† Bolonhesa",
          "description": "Massa italiana com molho de carne",
          "price": 45.90,
          "onlyForLocalConsumption": false,
          "imagePath": "/images/espaguete.jpg",
          "isActive": true
        }
      ]
    }
  ],
  "lastUpdate": "2024-01-15T10:30:00Z",
  "createdAt": "2024-01-15T10:30:00Z"
}</code></pre>
                    </div>
                </div>

                <!-- Kitchen Type Entity -->
                <div class="card">
                    <h2>üë®‚Äçüç≥ KitchenTypeEntity - Tipos de Cozinha</h2>
                    <p>
                        Representa os diferentes tipos de cozinha dispon√≠veis no sistema, 
                        com mapeamento expl√≠cito para MongoDB.
                    </p>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>KitchenTypeDocumentEntity.java - Entidade MongoDB</span>
                        </div>
                        <pre><code>@Document(collection = "kitchen_types")
@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class KitchenTypeDocumentEntity {

    @Id
    @Field("_id")
    private String id;

    @Indexed(unique = true)
    @Field("name")
    private String name;

    @Field("description")
    private String description;

    @CreatedDate
    @Field("createdAt")
    private LocalDateTime createdAt;

    @LastModifiedDate
    @Field("lastUpdate")
    private LocalDateTime lastUpdate;
}</code></pre>
                    </div>
                    
                    <h3>üìä Documento MongoDB - Kitchen Type</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Exemplo de Documento MongoDB</span>
                        </div>
                        <pre><code>{
  "_id": "507f1f77bcf86cd799439012",
  "name": "Italiana",
  "description": "Culin√°ria italiana tradicional com massas, pizzas e risotos",
  "createdAt": "2024-01-15T10:30:00Z",
  "lastUpdate": "2024-01-15T10:30:00Z"
}</code></pre>
                    </div>
                </div>

                <!-- Menu Structure -->
                <div class="card">
                    <h2>üçï Estrutura do Menu</h2>
                    <p>
                        O menu √© organizado em categorias, cada uma contendo itens espec√≠ficos 
                        com pre√ßos e informa√ß√µes detalhadas.
                    </p>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>MenuCategoryEntity.java</span>
                        </div>
                        <pre><code>@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class MenuCategoryEntity {
    
    private String id;
    private String type;
    private List&lt;MenuItemEntity&gt; items;
}</code></pre>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>MenuItemEntity.java</span>
                        </div>
                        <pre><code>@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class MenuItemEntity {

    private String id;
    private String name;
    private String description;
    private BigDecimal price;
    private Boolean onlyForLocalConsumption;
    private String imagePath;
    private Boolean isActive;
}</code></pre>
                    </div>
                    
                    <h3>üìä Estrutura do Menu no MongoDB</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Exemplo de Menu no Documento Restaurant</span>
                        </div>
                        <pre><code>"menu": [
  {
    "id": "507f1f77bcf86cd799439013",
    "type": "Entradas",
    "items": [
      {
        "id": "507f1f77bcf86cd799439015",
        "name": "Bruschetta",
        "description": "P√£o torrado com tomate e manjeric√£o",
        "price": 18.90,
        "onlyForLocalConsumption": false,
        "imagePath": "/images/bruschetta.jpg",
        "isActive": true
      }
    ]
  },
  {
    "id": "507f1f77bcf86cd799439016",
    "type": "Pratos Principais",
    "items": [
      {
        "id": "507f1f77bcf86cd799439014",
        "name": "Espaguete √† Bolonhesa",
        "description": "Massa italiana com molho de carne",
        "price": 45.90,
        "onlyForLocalConsumption": false,
        "imagePath": "/images/espaguete.jpg",
        "isActive": true
      }
    ]
  }
]</code></pre>
                    </div>
                </div>

                <!-- Operation Days -->
                <div class="card">
                    <h2>üïí Hor√°rios de Funcionamento</h2>
                    <p>
                        Cada restaurante possui hor√°rios de funcionamento espec√≠ficos 
                        para cada dia da semana.
                    </p>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>OperationDaysTimeData.java</span>
                        </div>
                        <pre><code>@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class OperationDaysTimeData {

    @Schema(title = "Dia", description = "Dia da semana", example = "Segunda-feira")
    private DayEnum day;

    @Schema(title = "Hor√°rio de abertura", description = "Hor√°rio de abertura do restaurante", example = "08:00")
    private String openingHours;

    @Schema(title = "Hor√°rio de fechamento", description = "Hor√°rio de fechamento do restaurante", example = "18:00")
    private String closingHours;
}</code></pre>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>DayEnum.java</span>
                        </div>
                        <pre><code>public enum DayEnum {
    MONDAY,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY,
    SATURDAY,
    SUNDAY;
}</code></pre>
                    </div>
                    
                    <h3>üìä Hor√°rios no MongoDB</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Exemplo de Hor√°rios no Documento Restaurant</span>
                        </div>
                        <pre><code>"daysOperation": [
  {
    "day": "MONDAY",
    "openingHours": "11:00",
    "closingHours": "22:00"
  },
  {
    "day": "TUESDAY",
    "openingHours": "11:00",
    "closingHours": "22:00"
  },
  {
    "day": "WEDNESDAY",
    "openingHours": "11:00",
    "closingHours": "22:00"
  },
  {
    "day": "THURSDAY",
    "openingHours": "11:00",
    "closingHours": "23:00"
  },
  {
    "day": "FRIDAY",
    "openingHours": "11:00",
    "closingHours": "23:00"
  },
  {
    "day": "SATURDAY",
    "openingHours": "12:00",
    "closingHours": "23:00"
  },
  {
    "day": "SUNDAY",
    "openingHours": "12:00",
    "closingHours": "21:00"
  }
]</code></pre>
                    </div>
                </div>

                <!-- MongoDB Features -->
                <div class="card">
                    <h2>üöÄ Recursos do MongoDB Utilizados</h2>
                    
                    <div class="feature-cards">
                        <div class="feature-card">
                            <div class="feature-card-icon">üÜî</div>
                            <h3 class="feature-card-title">IDs √önicos</h3>
                            <p class="feature-card-description">
                                Uso de @Id para identificadores √∫nicos autom√°ticos 
                                do MongoDB (_id).
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üìÖ</div>
                            <h3 class="feature-card-title">Auditoria Autom√°tica</h3>
                            <p class="feature-card-description">
                                @CreatedDate e @LastModifiedDate para rastreamento 
                                autom√°tico de datas.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üîç</div>
                            <h3 class="feature-card-title">√çndices Otimizados</h3>
                            <p class="feature-card-description">
                                @Indexed(unique = true) para campos √∫nicos 
                                como nome do tipo de cozinha.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üó∫Ô∏è</div>
                            <h3 class="feature-card-title">Mapeamento Expl√≠cito</h3>
                            <p class="feature-card-description">
                                @Field para mapeamento expl√≠cito entre campos 
                                Java e documentos MongoDB.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Best Practices -->
                <div class="card">
                    <h2>‚úÖ Melhores Pr√°ticas Implementadas</h2>
                    
                    <div class="feature-cards">
                        <div class="feature-card">
                            <div class="feature-card-icon">üèóÔ∏è</div>
                            <h3 class="feature-card-title">Separa√ß√£o de Responsabilidades</h3>
                            <p class="feature-card-description">
                                Entidades de dom√≠nio separadas das entidades 
                                de persist√™ncia MongoDB.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üîí</div>
                            <h3 class="feature-card-title">Valida√ß√£o de Dados</h3>
                            <p class="feature-card-description">
                                Uso de anota√ß√µes de valida√ß√£o e campos obrigat√≥rios 
                                bem definidos.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üìä</div>
                            <h3 class="feature-card-title">Estrutura Normalizada</h3>
                            <p class="feature-card-description">
                                Dados organizados de forma l√≥gica e eficiente 
                                para consultas e performance.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üîÑ</div>
                            <h3 class="feature-card-title">Versionamento</h3>
                            <p class="feature-card-description">
                                Campos de auditoria para rastreamento de mudan√ßas 
                                e hist√≥rico de dados.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Query Examples -->
                <div class="card">
                    <h2>üîç Exemplos de Consultas MongoDB</h2>
                    <p>
                        Exemplos pr√°ticos de como consultar os dados no MongoDB.
                    </p>
                    
                    <h3>üìã Consultas Comuns</h3>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>Buscar Restaurantes Ativos</span>
                        </div>
                        <pre><code>db.restaurants.find({ "isActive": true })</code></pre>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>Buscar por Tipo de Cozinha</span>
                        </div>
                        <pre><code>db.restaurants.find({ 
  "kitchenType.name": "Italiana" 
})</code></pre>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>Buscar Itens de Menu por Pre√ßo</span>
                        </div>
                        <pre><code>db.restaurants.find({
  "menu.items": {
    $elemMatch: {
      "price": { $gte: 30.00, $lte: 50.00 },
      "isActive": true
    }
  }
})</code></pre>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>Buscar Restaurantes por Hor√°rio de Funcionamento</span>
                        </div>
                        <pre><code>db.restaurants.find({
  "daysOperation": {
    $elemMatch: {
      "day": "MONDAY",
      "openingHours": { $lte: "12:00" }
    }
  }
})</code></pre>
                    </div>
                </div>

                <!-- Performance Tips -->
                <div class="card">
                    <h2>‚ö° Dicas de Performance</h2>
                    
                    <div class="feature-cards">
                        <div class="feature-card">
                            <div class="feature-card-icon">üìà</div>
                            <h3 class="feature-card-title">√çndices Estrat√©gicos</h3>
                            <p class="feature-card-description">
                                √çndices criados automaticamente para campos 
                                frequentemente consultados.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üîç</div>
                            <h3 class="feature-card-title">Proje√ß√µes Otimizadas</h3>
                            <p class="feature-card-description">
                                Uso de proje√ß√µes para retornar apenas campos 
                                necess√°rios nas consultas.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üìä</div>
                            <h3 class="feature-card-title">Agrega√ß√µes Eficientes</h3>
                            <p class="feature-card-description">
                                Pipeline de agrega√ß√£o para consultas complexas 
                                e relat√≥rios.
                            </p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-card-icon">üíæ</div>
                            <h3 class="feature-card-title">Write Concerns</h3>
                            <p class="feature-card-description">
                                Configura√ß√£o MAJORITY para garantir consist√™ncia 
                                dos dados.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html> 